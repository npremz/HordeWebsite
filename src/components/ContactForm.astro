---
interface Props {
	class?: string;
}

const { class: className = '' } = Astro.props;

import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<form id="contact-form" class=`${className} flex flex-col gap-8 md:gap-16 lg:max-w-[1100px]`>
	<div class="flex flex-col gap-8">
		<label for="name">{t('contact.name')}</label>
		<input 
			class="px-2.5 py-2.5 border border-labels"
			type="text" 
			id="name" 
			name="name" 
			placeholder={t('contact.name_placeholder')} 
			required 
		/>
	</div>

	<div class="flex flex-col gap-8">
		<label for="email">{t('contact.email')}</label>
		<input 
			class="px-2.5 py-2.5 border border-labels"
			type="email" 
			id="email" 
			name="email" 
			placeholder={t('contact.email_placeholder')} 
			required 
		/>
	</div>

	<div class="flex flex-col gap-8">
		<label for="message">{t('contact.message')}</label>
		<textarea 
			class="px-2.5 py-2.5 border border-labels"
			id="message" 
			name="message" 
			placeholder={t('contact.message_placeholder')} 
			required
			rows="6"
		></textarea>
	</div>

	<div class="flex flex-col gap-8 lg:flex-row lg:justify-between">
		<div class="form-field">
			<label class="checkbox-label flex items-start">
				<input
					class="mt-1.5"
					type="checkbox" 
					id="marketing" 
					name="marketing" 
				/>
				<span class="block pl-4">{t('contact.marketing')}</span>
			</label>
		</div>
		
		<button type="submit" class="leading-none cursor-pointer px-2.5 py-4 bg-fond text-fonddark uppercase tracking-wider lg:px-10 lg:py-6 ">{t('contact.submit')}</button>
	</div>
</form>

<script>
	const form = document.getElementById('contact-form') as HTMLFormElement;

	form?.addEventListener('submit', (e) => {
		e.preventDefault();
		
		const formData = new FormData(form);
		const data = {
			name: formData.get('name'),
			email: formData.get('email'),
			message: formData.get('message'),
			marketing: formData.get('marketing') === 'on'
		};
		
		console.log('Form submitted:', data);
		
		// Ici tu pourras ajouter l'envoi vers ton backend
		// fetch('/api/contact', { method: 'POST', body: JSON.stringify(data) })
	});
</script>
