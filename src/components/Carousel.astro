---
interface Props {
	textColor?: string;
	speed?: number;
	class?: string;
}

const { 
	textColor = 'text-white', 
	speed = 5, 
	class: className = '' 
} = Astro.props;

const accessibleId = `carousel-aria-${Math.random().toString(36).slice(2, 9)}`;
---

<span id={accessibleId} class="sr-only"><slot /></span>
<div class={`carousel-container w-screen overflow-hidden left-1/2 -translate-x-1/2 ${textColor} ${className}`} aria-labelledby={accessibleId}>
	<div class="carousel-track" aria-hidden="true" style={`--carousel-speed: ${speed}s; animation-duration: ${speed}s;`}>
		<span class="carousel-text relative" aria-hidden="true"><slot /></span>
		<span class="carousel-text relative" aria-hidden="true"><slot /></span>
		<span class="carousel-text relative" aria-hidden="true"><slot /></span>
		<span class="carousel-text relative" aria-hidden="true"><slot /></span>
		<span class="carousel-text relative" aria-hidden="true"><slot /></span>
		<span class="carousel-text relative" aria-hidden="true"><slot /></span>
		<span class="carousel-text relative" aria-hidden="true"><slot /></span>
		<span class="carousel-text relative" aria-hidden="true"><slot /></span>
	</div>
</div>

<style>
	.carousel-container {
		position: relative;
		padding: 0.5rem 0;
	}

	.carousel-track {
		display: flex;
		gap: 2rem;
		animation: scroll linear infinite;
		width: fit-content;
	}

	@media only screen and (min-width: 64rem) {
		.carousel-track {
			animation-duration: calc(var(--carousel-speed) * 1.5) !important;
		}
	}

	@media only screen and (min-width: 95rem) {
		.carousel-track {
			animation-duration: calc(var(--carousel-speed) * 2) !important;
		}
	}

	@media only screen and (min-width: 120rem) {
		.carousel-track {
			animation-duration: calc(var(--carousel-speed) * 2.5) !important;
		}
	}

	.carousel-text {
		font-family: var(--font-editorial);
		white-space: nowrap;
		font-weight: 200;
		line-height: 1;
		display: flex;
		align-items: center;
		gap: 0.5rem;
	}

	@keyframes scroll {
		0% {
			transform: translateX(0);
		}
		100% {
			transform: translateX(-25%);
		}
	}
</style>
